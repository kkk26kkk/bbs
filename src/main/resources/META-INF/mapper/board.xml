<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"  
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
	<select id="getArticleList" parameterType="com.kkk26kkk.common.model.Page" resultType="com.kkk26kkk.bbs.model.Article">
		<![CDATA[
		SELECT *
		FROM
			(
				SELECT /*+ INDEX_DESC(A SYS_C007000) */
		        rownum rnum, A.*
				FROM tb_article A
				WHERE 1=1
				START WITH parent_id = 0 
				CONNECT BY PRIOR article_id = parent_id
				ORDER SIBLINGS BY article_id DESC
			)
		WHERE rnum >= #{startNum}
		AND rnum <= #{endNum}
		]]>
	</select>
	
	<select id="getArticleCount" resultType="int">
		SELECT COUNT(article_id)
		FROM tb_article
	</select>	
</mapper>